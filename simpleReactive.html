<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    class Vue {
      constructor(option) {
        this.observe(option.data)
      }
      observe(data) {
        if (!data || typeof data !== 'object') return
        Object.entries(data).forEach(([key, value]) => {
          this.observe(value)
          this.defineReactive(data, key, value)
        })
      }
      defineReactive(obj, key, value) {
        Object.defineProperty(obj, key, {
          get() {
            console.log('getter: ', value)
            return value
          },
          set(newV) {
            if (newV === value) return
            console.log('setter: ', newV)
            value = newV
          }
        })
      }
    }
  </script>
  <script>
    var data = { obj: { foo: 'foo'}, bar: 'bar' }
    new Vue({data: data})
  </script>
</body>
</html>